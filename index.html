<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="utf-8"><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title> Roguelike </title>

	<style>
		body { margin: 0; }
		#unityContainer { width: 100vw; height: 100vh; }
		canvas { width: 100%; height: 100%; }
	</style>

	<script src="Build/UnityLoader.js"></script>
	<script src="vkBridge.js"></script>
	<script type="text/javascript" src="//vk.com/js/api/xd_connection.js?2" charset="utf-8"></script>
	<script type="text/javascript" src="//ad.mail.ru/static/admanhtml/rbadman-html5.min.js" charset="utf-8"></script>
	<script type="text/javascript" src="//vk.com/js/api/adman_init.js" charset="utf-8"></script>

	<script>
	//////////////////// Media Ad ////////////////////
		window.addEventListener('load', function() {
			admanInit({
				user_id: userId,
				app_id: 7760038,
				mobile: true,
				type: 'preloader',
				params: { preview: 1 }
			}, onAdsReady, onNoAds);

			function onAdsReady (adman) {
				adman.onStarted(function () {});
				adman.onCompleted(function() {});
				adman.onSkipped(function() {});      
				adman.onClicked(function() {}); 
				adman.start('preroll');
			};
			function onNoAds () {};
		});

	//////////////////// Game ////////////////////
		UnityLoader.compatibilityCheck = function(e,t,r){ t(); };
		var game = UnityLoader.instantiate("unityContainer", "Build/FinalBuild.json");

		vkBridge.send("VKWebAppInit", {});
		//var userId = new URL(window.location.href).searchParams.get('viewer_id');

		/*
		function Index_SetUserId() {
			game.SendMessage('VKController', 'SetUserId', userId);
		}
		
		function Index_WallPost(level) {
			vkBridge.send("VKWebAppShowWallPostBox", {
				"owner_id": userId,
				"message": "Мой рекорд: " + level + " уровень!",
				"attachments": "photo527676448_457239040,https://vk.com/app7760038_239889416"
			});
		}
		*/

		//function Index_ShowAd() {
		//}

		//vkBridge.send("VKWebAppJoinGroup", {
			//"group_id": MY GROUP ID
		//});

		//function Index_AddToFavorites() {
			//vkBridge.send("VKWebAppAddToFavorites");
		//}
		
		//function Index_InviteFriend() {
			//bridge.sendPromise("VKWebAppShowInviteBox");
		//}
	</script>
</head>

<body>
	<div id="unityContainer"></div>
</body>
</html>